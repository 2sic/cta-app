@inherits Custom.Hybrid.Razor12
@using ToSic.Razor.Blade;
@using ToSic.Sxc.Services;
@{
  /* This is a partial template which is re-used in the Content-Templates */

  // Parameter passed in from the calling page - if we don't have an image, exit
  var imgItem = DynamicModel.Item;  // The content-item with the image
  if (!Text.Has(imgItem.BackgroundImage)) { return; }

  // Figure out width of the image based on max-width of a content-image and 12 Bootstrap Columns
  // The resulting value will be something like "12/12" or "4/12" which is used by the Link.Image(...)
  var resizeFactor = (DynamicModel.Columns ?? 12) + "/12";

  // Image Service used to generate optimal images
  var imgSvc = GetService<IImageService>();

  var altText = Text.First(imgItem.Field("BackgroundImage").Metadata.Description, imgItem.Title);
}

<figure>
  @imgSvc.Picture(imgItem.Field("BackgroundImage"), settings: Settings.Images.Content, factor: resizeFactor, imgAlt: altText)
</figure>
